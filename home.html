<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>
   Sis &amp; Bro
  </title>
  <link rel="icon" href="./img/favicon.png" type="image/png">
  <link rel="stylesheet" href="style.css" type="text/css" media="all" />
  <script src="https://cdn.tailwindcss.com">
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Beau+Rivage&family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Unna:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
 </head>
 <body>
   <section class="relative w-full h-screen bg-[url('./img/ft1.jpg')] bg-cover bg-center text-white">
  <!-- Overlay gelap -->
  <div class="absolute inset-0 bg-[#1b1e23]/60"></div>
  <div class="absolute inset-0 bg-gradient-to-b from-transparent via-[#1b1e23]/40 to-[#1b1e23]"></div>

  <!-- Content di bawah -->
  <div class="relative z-10 flex flex-col justify-end h-full">
    <div class="w-full px-6 pb-16 text-center">
      <div class="flex justify-center reveal slide-up opacity-0 translate-y-10 transition-all duration-1000">
        <img class="w-12 h-12" src="./img/or2.png" alt=""/>
      </div>
      <p class="text-sm font-inter text-putih mb-4reveal slide-up opacity-0 translate-y-10 transition-all duration-1000">The Wedding of</p>
      <h1 class="text-5xl font-beau mb-4 text-putih reveal zoom-in opacity-0 scale-95 transition-all duration-1000">Sis &amp; Bro</h1>
      <p class="text-sm font-inter text-putih mb-6 reveal fade-in opacity-0 transition-opacity duration-1000">11 November 2029</p>

      <!-- Countdown -->
      <div id="countdown" class="flex justify-center gap-3 mb-8 reveal slide-down opacity-0 -translate-y-10 transition-all duration-1000"></div>

      <a href="#"
         class="px-6 py-3 bg-[#f6f6f6] text-ireng font-inter rounded-2xl shadow-lg hover:bg-gray-200 transition reveal slide-down opacity-0 -translate-y-10 transition-all duration-1000">
         Save The Date
      </a>
    </div>
  </div>
</section>

<div id="mempelai"></div>
<div id="acara"></div>
<div id="qoutes"></div>
<div id="story"></div>
<div id="gallery"></div>
<div id="closing"></div>

<!-- rsvp -->
<section id="rsvp" class="bg-[#1b1e23] py-9">
        <div class="grid grid-cols-3 gap-4 text-center mb-8 mx-4 reveal zoom-in opacity-0 scale-95 transition-all duration-1000">
      <div class="bg-[#f6f6f6] p-4 rounded-lg shadow">
        <h3 class="text-5xl font-unna-regular text-ireng" id="countHadir">0</h3>
        <p class="font-inter text-ireng text-sm">Hadir</p>
      </div>
      <div class="bg-[#f6f6f6] p-4 rounded-lg shadow">
        <h3 class="text-5xl font-unna-regular text-ireng" id="countTidak">0</h3>
        <p class="font-inter text-ireng text-sm">Tidak Hadir</p>
      </div>
      <div class="bg-[#f6f6f6] p-4 rounded-lg shadow">
        <h3 class="text-5xl font-unna-regular text-ireng" id="countRagu">0</h3>
        <p class="text-ireng font-inter text-sm">Ragu</p>
      </div>
    </div>
        
           <!-- Form RSVP -->
   <div class="bg-[#f6f6f6] p-6 rounded-2xl shadow-lg mb-8 mx-4 reveal zoom-in opacity-0 scale-95 transition-all duration-1000">
  <form id="rsvpForm" class="space-y-4">
    <input type="text" id="nama" placeholder="Nama" required
      class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#d4af37] font-inter text-black placeholder-gray-500">

    <select id="status" required
      class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#d4af37] font-inter text-black">
      <option value="" disabled selected>Konfirmasi Kehadiran</option>
      <option value="Hadir">Hadir</option>
      <option value="Tidak Hadir">Tidak Hadir</option>
      <option value="Ragu">Ragu</option>
    </select>

    <textarea id="ucapan" placeholder="Tulis ucapan..." rows="3"
      class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#d4af37] font-inter text-black placeholder-gray-500"></textarea>

    <button type="submit"
      class="w-full bg-[#d4af37] text-white py-2 rounded-lg hover:bg-[#b8962f] font-inter transition">
      Kirim
    </button>
  </form>
</div>


    <!-- List Ucapan -->
    <div class="bg-[#f6f6f6] p-6 rounded-2xl shadow-lg mx-4 reveal zoom-in opacity-0 scale-95 transition-all duration-1000">
      <h3 class="text-xl font-unna-regular mb-4 text-ireng text-center">Ucapan &amp; Doa</h3>
      <div id="listUcapan" class="space-y-4">
        <!-- Data ucapan dari Firebase muncul di sini -->
      </div>
    </div>
    </section>
    
<div id="footer"></div>
    
    <!-- Audio -->
        <audio id="bg-music" src="./musik/bgm.mp3" loop></audio>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js";
  import { getFirestore, collection, addDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-firestore.js";

  // ðŸ”§ Config Firebase (punya lo)
  const firebaseConfig = {
    apiKey: "AIzaSyD1U-GeiQawf9o3Dwo3CgoD56mnm6uMcgI",
    authDomain: "undangan-kode-4.firebaseapp.com",
    projectId: "undangan-kode-4",
    storageBucket: "undangan-kode-4.firebasestorage.app",
    messagingSenderId: "179186294347",
    appId: "1:179186294347:web:812c0684091409cca8b7ce",
    measurementId: "G-ZRYXNW6HH1"
  };

  // Init Firebase
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // ðŸ”¥ Ubah ini tiap klien â†’ misal "rsvp_andi123", "rsvp_budi456", dst.
  const rsvpRef = collection(db, "rsvp_andi123");

  // Form submit
  const form = document.getElementById("rsvpForm");
  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const nama = document.getElementById("nama").value;
    const status = document.getElementById("status").value;
    const ucapan = document.getElementById("ucapan").value;

    try {
      await addDoc(rsvpRef, {
        nama,
        status,
        ucapan,
        timestamp: new Date()
      });
      form.reset();
    } catch (err) {
      console.error("Error simpan data:", err);
    }
  });

  // Realtime listener untuk data RSVP
  const listUcapan = document.getElementById("listUcapan");
  const countHadir = document.getElementById("countHadir");
  const countTidak = document.getElementById("countTidak");
  const countRagu = document.getElementById("countRagu");

  onSnapshot(rsvpRef, (snapshot) => {
    let hadir = 0, tidak = 0, ragu = 0;
    listUcapan.innerHTML = "";

    snapshot.forEach((doc) => {
      const data = doc.data();

      // Hitung counter
      if (data.status === "Hadir") hadir++;
      if (data.status === "Tidak Hadir") tidak++;
      if (data.status === "Ragu") ragu++;

      // Tampilkan ucapan
      if (data.ucapan && data.ucapan.trim() !== "") {
        const item = document.createElement("div");
        item.className = "p-3 bg-white rounded-lg shadow";
        item.innerHTML = `
          <p class="font-bold text-ireng">${data.nama}</p>
          <p class="text-sm text-ireng italic">"${data.ucapan}"</p>
        `;
        listUcapan.appendChild(item);
      }
    });

    // Update counter
    countHadir.textContent = hadir;
    countTidak.textContent = tidak;
    countRagu.textContent = ragu;
  });
</script>




<script>
  //countdown
  
  const targetDate = new Date("Nov 11, 2029 00:00:00").getTime();
  const countdownEl = document.getElementById("countdown");

  function updateCountdown() {
    const now = new Date().getTime();
    const distance = targetDate - now;

    if (distance < 0) {
      countdownEl.innerHTML = "<p class='text-xl font-bold'>Acara sudah dimulai ðŸŽ‰</p>";
      return;
    }

    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
    const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((distance % (1000 * 60)) / 1000);

    countdownEl.innerHTML = `
      <div class="flex flex-col items-center bg-white/20 backdrop-blur-md rounded-xl px-4 py-2 min-w-[70px]">
        <span class="text-2xl font-unna text-putih">${days}</span>
        <span class="text-xs uppercase font-inter text-putih">Hari</span>
      </div>
      <div class="flex flex-col items-center bg-white/20 backdrop-blur-md rounded-xl px-4 py-2 min-w-[70px]">
        <span class="text-2xl font-unna text-putih">${hours}</span>
        <span class="text-xs uppercase font-inter text-putih">Jam</span>
      </div>
      <div class="flex flex-col items-center bg-white/20 backdrop-blur-md rounded-xl px-4 py-2 min-w-[70px]">
        <span class="text-2xl font-unna text-putih">${minutes}</span>
        <span class="text-xs uppercase font-inter text-putih">Menit</span>
      </div>
      <div class="flex flex-col items-center bg-white/20 backdrop-blur-md rounded-xl px-4 py-2 min-w-[70px]">
        <span class="text-2xl font-unna text-putih">${seconds}</span>
        <span class="text-xs uppercase font-inter text-putih">Detik</span>
      </div>
    `;
  }

  setInterval(updateCountdown, 1000);
  updateCountdown();
  
  const observer = new IntersectionObserver((entries) => {
  entries.forEach((entry) => {
    if (entry.isIntersecting) {
      const el = entry.target;

      // Slide dari kiri
      if (el.classList.contains("slide-left")) {
        el.classList.remove("opacity-0", "-translate-x-10");
        el.classList.add("opacity-100", "translate-x-0");
      }

      // Slide dari kanan
      if (el.classList.contains("slide-right")) {
        el.classList.remove("opacity-0", "translate-x-10");
        el.classList.add("opacity-100", "translate-x-0");
      }
      
      // slide-down
if (el.classList.contains("slide-down")) {
  el.classList.remove("opacity-0", "-translate-y-10");
  el.classList.add("opacity-100", "translate-y-0");
}


      // Slide dari bawah
      if (el.classList.contains("slide-up")) {
        el.classList.remove("opacity-0", "translate-y-10");
        el.classList.add("opacity-100", "translate-y-0");
      }

      // Fade in
      if (el.classList.contains("fade-in")) {
        el.classList.remove("opacity-0");
        el.classList.add("opacity-100");
      }

      // Zoom in
      if (el.classList.contains("zoom-in")) {
        el.classList.remove("opacity-0", "scale-95");
        el.classList.add("opacity-100", "scale-100");
      }

      // Kalau sudah kelihatan, stop observe biar ga diulang
      observer.unobserve(el);
    }
  });
});

// Observe semua elemen dengan class .reveal
document.querySelectorAll(".reveal").forEach((el) => observer.observe(el));

  
    //panggil section
  function loadSection(id, url) {
  fetch(url)
    .then(response => {
      if (!response.ok) {
        throw new Error("Gagal load " + url);
      }
      return response.text();
    })
    .then(data => {
      const container = document.getElementById(id);
      container.innerHTML = data;

      // Re-observe elemen baru yang ada .reveal
      container.querySelectorAll(".reveal").forEach((el) => observer.observe(el));
    })
    .catch(error => {
      console.error("Error:", error);
    });
}

  // panggil section
  loadSection("mempelai", "./mempelai.html");
  loadSection("qoutes", "./qoutes.html")
  loadSection("acara", "./acara.html");
  loadSection("story", "./story.html");
  loadSection("gallery", "./gallery.html");
  loadSection("closing", "./closing.html");
  loadSection("footer", "./footer.html");


  
  // script musik
  window.addEventListener("DOMContentLoaded", () => {
            const music = document.getElementById("bg-music");
        
            // coba autoplay
            music.play().catch(() => {
              console.log("Autoplay diblokir, munculin popup manual");
        
              // bikin popup kecil
              const popup = document.createElement("div");
              popup.innerHTML = `
                <div class="fixed bottom-4 right-4 bg-[#d4af37] text-[#1b1e23] px-4 py-2 rounded-full shadow-lg flex items-center gap-2 cursor-pointer animate-bounce">
                  ðŸŽµ
                </div>
              `;
              
              popup.onclick = () => {
                music.play();
                popup.remove(); // ilangin popup setelah musik nyala
              };
        
              document.body.appendChild(popup);
            });
          });
</script>



 </body>
</html>
